{
  "version": 3,
  "sources": ["../../@peasy-lib/peasy-assets/dist/esm/index.mjs"],
  "sourcesContent": ["class Assets {\n    static get pending() {\n        return this.requested - this.loaded;\n    }\n    static initialize(s = {}) {\n        Assets.initialized = true;\n        if (s.src != null) Assets.sources.default = s.src;\n    }\n    static load(s) {\n        return Promise.all(s.map((async s => {\n            if (typeof s === \"string\") s = {\n                src: s\n            };\n            const t = `${Assets.sources.default}${s.src ?? \"\"}`;\n            const e = s.family != null ? \"font\" : Assets.types[s.type ?? t.split(\".\").pop() ?? \"\"];\n            const i = Assets.loaders[e];\n            if (i == null) return null;\n            let a = s.name;\n            if (a == null) if (e === \"font\") a = s.family; else {\n                a = t.split(\"/\").pop() ?? \"\";\n                const s = a.split(\".\");\n                s.pop();\n                a = s.join(\".\");\n            }\n            Assets.requested++;\n            const n = i(t, s);\n            Assets.assets[e][a] = await n;\n            Assets.loaded++;\n            return n;\n        })));\n    }\n    static clear() {\n        Assets.assets = {\n            image: {},\n            audio: {},\n            font: {}\n        };\n        Assets.requested = 0;\n        Assets.loaded = 0;\n        return Promise.resolve();\n    }\n    static image(s) {\n        return Assets.assets.image[s];\n    }\n    static audio(s) {\n        return Assets.assets.audio[s];\n    }\n    static font(s) {\n        return Assets.assets.font[s];\n    }\n    static loadImage(s) {\n        return new Promise((async t => {\n            const e = new Image;\n            e.onprogress = (...s) => console.log(\"progress\", s);\n            e.onload = () => t(e);\n            e.src = await fetch(s).then((s => s.url));\n        }));\n    }\n    static loadAudio(s) {\n        return new Promise((t => {\n            const e = new Audio;\n            e.addEventListener(\"progress\", ((...s) => console.log(\"progress\", s)));\n            e.oncanplaythrough = () => t(e);\n            e.src = s;\n        }));\n    }\n    static loadFont(s, t) {\n        if (!s.startsWith(\"url(\")) s = `url(${s})`;\n        return new Promise((async e => {\n            const i = new FontFace(t.family, s, t.descriptors ?? {});\n            await i.load();\n            document.fonts.add(i);\n            e(i);\n        }));\n    }\n}\n\nAssets.initialized = false;\n\nAssets.sources = {\n    default: \"/assets/\"\n};\n\nAssets.assets = {\n    image: {},\n    audio: {},\n    font: {}\n};\n\nAssets.requested = 0;\n\nAssets.loaded = 0;\n\nAssets.types = {\n    image: \"image\",\n    audio: \"audio\",\n    png: \"image\",\n    svg: \"image\",\n    jpg: \"image\",\n    jpeg: \"image\",\n    gif: \"image\",\n    mp3: \"audio\",\n    wav: \"audio\"\n};\n\nAssets.loaders = {\n    image: Assets.loadImage,\n    audio: Assets.loadAudio,\n    font: Assets.loadFont\n};\n\nexport { Assets };\n//# sourceMappingURL=index.mjs.map\n"],
  "mappings": "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",
  "names": ["s"]
}
